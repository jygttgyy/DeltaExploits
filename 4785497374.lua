local LP = game.Players.LocalPlayer
local function CreateHighlight(Object, Color)
	local Highlight = Object:FindFirstChild("Highlight")
	if Highlight then
		Highlight.OutlineColor = Color
	else
		Highlight = Instance.new("Highlight")
		Highlight.Name = "Highlight"
		Highlight.Adornee = Object
		Highlight.Parent = Object
		Highlight.DepthMode = 0
		Highlight.Enabled = true
		Highlight.FillTransparency = 1
		Highlight.OutlineColor = Color
		Highlight.OutlineTransparency = 0.3
	end
	Highlight.OutlineColor = Color
	return Highlight
end
local function GetCandyBags()
	for i, Bag in ipairs(workspace.Candy_Bin:GetChildren()) do
		Bag.Position = LP.Character.HumanoidRootPart.Position
	end
end
while true do
	local RoundInfo = LP.PlayerGui.Main_GUI.Top_Bar.Note_Label.Text
	if RoundInfo == "Survive Bear for the Full Round." or RoundInfo == "Survive Sam for the Full Round." or RoundInfo == "Survive B.O.B. for the Full Round." or RoundInfo == "Survive Doggle for the Full Round." or RoundInfo == "Survive The Zombie for the Full Round." then
		GetCandyBags()
		if LP.Team == game.Teams.BEAR then
			for i, Player in ipairs(game.Players:GetPlayers()) do
				if Player ~= LP and Player.Team == game.Teams.Survivors then
					CreateHighlight(Player.Character, Color3.fromRGB(0, 0, 255))
				end
			end
		elseif LP.Team == game.Teams.Survivors then
			for i, Player in ipairs(game.Players:GetPlayers()) do
				if Player ~= LP and Player.Team == game.Teams.BEAR then
					if Player.Character.HumanoidRootPart:FindFirstChild("BillboardGui") then
						Player.Character.HumanoidRootPart.BillboardGui.AlwaysOnTop = true
					else
						CreateHighlight(Player.Character, Color3.fromRGB(255, 0, 0))
					end
				end
			end
			for i, Quest in ipairs(workspace.Puzzle_Bin:GetChildren()) do
				if Quest:FindFirstChild("Decor") then
					CreateHighlight(Quest.Decor, Color3.fromRGB(255, 165, 0))
				end
			end
			for i, Collectible in ipairs(workspace.Entity_Bin:GetChildren()) do
				CreateHighlight(Collectible, Color3.fromRGB(0, 255, 0))
			end
		end
	elseif RoundInfo == "Survivors must Escape the Map and avoid Bear." or RoundInfo == "Survivors must Escape the Map and avoid Sam." or RoundInfo == "Survivors must Escape the Map and avoid B.O.B." or RoundInfo == "Survivors must Escape the Map and avoid Doggle." or RoundInfo == "Survivors must Escape the Map and avoid The Zombie." then
		GetCandyBags()
		if LP.Team == game.Teams.BEAR then
			for i, Player in ipairs(game.Players:GetPlayers()) do
				if Player ~= LP and Player.Team == game.Teams.Survivors then
					CreateHighlight(Player.Character, Color3.fromRGB(0, 0, 255))
				end
			end
		elseif LP.Team == game.Teams.Survivors then
			for i, Player in ipairs(game.Players:GetPlayers()) do
				if Player ~= LP and Player.Team == game.Teams.BEAR then
					if Player.Character.HumanoidRootPart:FindFirstChild("BillboardGui") then
						Player.Character.HumanoidRootPart.BillboardGui.AlwaysOnTop = true
					else
						CreateHighlight(Player.Character, Color3.fromRGB(0, 0, 255))
					end
				end
			end
			for i, Quest in ipairs(workspace.Puzzle_Bin:GetChildren()) do
				if Quest:FindFirstChild("Decor") then
					CreateHighlight(Quest.Decor, Color3.fromRGB(255, 165, 0))
				end
			end
			for i, Collectible in ipairs(workspace.Entity_Bin:GetChildren()) do
				CreateHighlight(Collectible, Color3.fromRGB(0, 255, 0))
			end
		end
	elseif RoundInfo:sub(1,-2) == "WAVE " then
		for i, Monster in ipairs(workspace.Puzzle_Bin:GetChildren()) do
			if Monster:FindFirstChild("HumanoidRootPart") then
				if Monster.HumanoidRootPart:FindFirstChild("BillboardGui") then
					CreateHighlight(Quest.Decor, Color3.fromRGB(255, 0, 0))
				end
			end
		end
	else
		GetCandyBags()
		for i, Player in ipairs(game.Players:GetPlayers()) do
			if Player.Team == game.Teams.Survivors then
				if Player ~= LP and Player.Backpack:FindFirstChild("Psycho_Knife") then
					CreateHighlight(Player.Character, Color3.fromRGB(255, 0, 0))
				elseif Player.Backpack:FindFirstChild("Psycho_Gun") then
					CreateHighlight(Player.Character, Color3.fromRGB(0, 0, 255))
				end
			elseif Player ~= LP and Player.Team == game.Teams.BEAR then
				CreateHighlight(Player.Character, Color3.fromRGB(255, 0, 0))
			end
		end
	end
	task.wait(2)
end
